[# Is there a `mvn` template for junit 5 and selenium?

I want to use the `mvn` cli to generate a template that contains at least junit. I ant to learn how to add selenium as a project dependency. At this point I don't know how to use `mvn`. I'm doing things the hard way without IntelliJ so I can see what's happening under the hood.

A great place to start reading the doc is the [Maven Users Centre
](https://maven.apache.org/users/index.html). It's a gentle intro that contains child pages:
* [Maven in 5 Minutes](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)
* [Maven Getting Started Guide](https://maven.apache.org/guides/getting-started/index.html)

In getting-started, I learned `mvn` needs `java` from [Maven in 5 Minutes](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html)! A lot of the learnings in this document are from reading these sources.

## `mvn` cli intro

To get help, I can type

```bash
mvn --help
```

At the top of the help menu, I get the usage guidance.

> `mvn --help`
>
> `usage: mvn [options] [<goal(s)>] [<phase(s)>]`

I can find the whole list of options on the [Maven CLI Options Reference
](https://maven.apache.org/ref/3.9.9/maven-embedder/cli.html (Maven CLI Options Reference
)).

## Creating a project

```pwsh
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.5 -DinteractiveMode=false
```

This command from Maven in 5 minutes runs the `archetype:generate` goal with the options passed in for `groupId`, `artifatId`, `archetypeArtifactId`, `archetypeVersion` and `interactiveMode` set. The options are set with the `-D` prefix.

*Sadly, the help menu said I pass in `[options]` before `[goal]` but in use it's the other way around. Documentation isn't always perfect.*

The docs go on to [explain what this does](https://maven.apache.org/guides/getting-started/maven-in-five-minutes.html#what-did-i-just-do):

> You executed the Maven goal archetype:generate, and passed in various parameters to that goal. The prefix archetype is the plugin that provides the goal. If you are familiar with Ant, you may conceive of this as similar to a task. This archetype:generate goal created a simple project based upon a maven-archetype-quickstart archetype. Suffice it to say for now that a plugin is a collection of goals with a general common purpose. For example the jboss-maven-plugin, whose purpose is "deal with various jboss items".

Here's how I understand it.

1. The goal is `generate`.
2. The definition of `generate` is specific to the plugin `archetype`. 
    1. The Archetype Plugin allows the user to create a Maven project from an existing template called an archetype.
    2. The plugin `archetype` plugin has documentation [here](https://maven.apache.org/archetype/maven-archetype-plugin/).
    3. I want to use the generate goal which is defined [here](https://maven.apache.org/archetype/maven-archetype-plugin/generate-mojo.html)
    4. `archetype` is part of [Maven Core](https://maven.apache.org/ref/3.9.9/maven-core/index.html#maven-core)'s tools and thus is included by default.
3. I used the [maven-archetype-quickstart](https://maven.apache.org/archetypes/maven-archetype-quickstart/) archetype by passing it in via `-DarchetypeArtifactId`
    1. I specify the version of `maven-archetype-quickstart` that I want with `archetypeVersion`. It seems [1.5](https://mvnrepository.com/artifact/org.apache.maven.archetypes/maven-archetype-quickstart/1.5) is the latest available one of this archetype, as per https://mvnrepository.com/artifact/org.apache.maven.archetypes/maven-archetype-quickstart.
4. `groupId` is something mandatory to all [POMs](https://maven.apache.org/guides/getting-started/index.html#how-do-i-make-my-first-maven-project).
    1. This element indicates the unique identifier of the organization or group that created the project. The groupId is one of the key identifiers of a project and is typically based on the fully qualified domain name of your organization. For example org.apache.maven.plugins is the designated groupId for all Maven plugins. For my project I want it to be `com.sintutu.fakeapitests`. Why so specific? This whole project's purpose is to house *tests* on the fake api.
    2. The full specification for a POM is available [here](https://maven.apache.org/ref/3.9.9/maven-model/maven.html#maven).
5. `artifactId` is another manatory field mandatory to all [POMs](https://maven.apache.org/guides/getting-started/index.html#how-do-i-make-my-first-maven-project). 
    1. This element indicates the unique base name of the primary artifact being generated by this project. The primary artifact for a project is typically a JAR file. Secondary artifacts like source bundles also use the artifactId as part of their final name. A typical artifact produced by Maven would have the form <artifactId>-<version>.<extension> (for example, myapp-1.0.jar). I'm choosing to name mine `fakeapitests` because the primary artifact I want to publish *is* tests.
6. `interactiveMode` is set to false. It's a concept associated with a settings.xml file.
    1. This line is in this example just to ensure that I don't use any settings that may be defined somewhere and I'm not aware of it for this example.
    2. There are [two locations](https://maven.apache.org/settings.html#quick-overview)here a settings.xml file may live: the Maven install: `${maven.home}/conf/settings.xml` or a user's install: `${user.home}/.m2/settings.xml`. I've just checked `${maven.home}/conf/settings.xml` and it's commented out.
7. `-D` needs to be prefixed to each of the options I'm setting. It's weird.

### What should I be getting out of running the command?

I should get something similar to

![Quickstart directory structure](quickstart-directory-structure.png)

and a pom.xml similar to 

```xml
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
 
  <groupId>com.mycompany.app</groupId>
  <artifactId>my-app</artifactId>
  <version>1.0-SNAPSHOT</version>
 
  <name>my-app</name>
  <!-- FIXME change it to the project's website -->
  <url>http://www.example.com</url>
 
  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <maven.compiler.release>17</maven.compiler.release>
  </properties>
 
  <dependencyManagement>
    <dependencies>
      <dependency>
        <groupId>org.junit</groupId>
        <artifactId>junit-bom</artifactId>
        <version>5.11.0</version>
        <type>pom</type>
        <scope>import</scope>
      </dependency>
    </dependencies>
  </dependencyManagement>
 
  <dependencies>
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-api</artifactId>
      <scope>test</scope>
    </dependency>
    <!-- Optionally: parameterized tests support -->
    <dependency>
      <groupId>org.junit.jupiter</groupId>
      <artifactId>junit-jupiter-params</artifactId>
      <scope>test</scope>
    </dependency>
  </dependencies>
 
  <build>
    <pluginManagement><!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) -->
       ... lots of helpful plugins
    </pluginManagement>
  </build>
</project>
```

In my case I'd be running the below command from repo root

```pwsh
mvn archetype:generate -DgroupId=com.sintut.fakeapitests -DartifactId=fakeapitests -DarchetypeArtifactId=maven-archetype-quickstart -DarchetypeVersion=1.5 -DinteractiveMode=false
```

which would mean I'd have a new directory called `fakeapitests` with child directories `src` and `test`, as well as a `pom.xml`.